import{p as g,d as _,c as w,o as B,F as U,j as i,e as T,a as y,t as b,k as F,_ as R,C as A,G as m,ah as I,w as L}from"./chunks/framework.ArdWB6UD.js";const C=s=>{if(typeof s=="string"){if(s.startsWith("http://")||s.startsWith("https://")||s.startsWith("ftp://"))return"url";if(s.startsWith("data:"))return"base64"}else{if(s instanceof Blob||s instanceof File)return"blob";if(s instanceof ArrayBuffer||s instanceof Uint8Array)return"buffer"}throw new Error("Không thể xác định loại dữ liệu để tải")},x=s=>{var n;const o=(n=s.split(".").pop())==null?void 0:n.toLowerCase();return{pdf:"application/pdf",txt:"text/plain",csv:"text/csv",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",html:"text/html"}[o||""]||"application/octet-stream"};function P(){const s=g("idle"),o=g(null),e=()=>{s.value="idle",o.value=null},n=async(a,p,l,d)=>{e();try{s.value="downloading";const k=l||C(a),u=p||"download",c=d||x(u);let r;switch(k){case"url":{const t=await fetch(a);if(!t.ok)throw new Error(`Fetch failed: ${t.status} ${t.statusText}`);r=await t.blob();break}case"base64":{const t=a,E=atob(t.split(",")[1]||t),D=new ArrayBuffer(E.length),v=new Uint8Array(D);for(let f=0;f<E.length;f++)v[f]=E.charCodeAt(f);r=new Blob([D],{type:c});break}case"blob":{r=a;break}case"buffer":{if(a instanceof ArrayBuffer)r=new Blob([a],{type:c});else if(a instanceof Uint8Array)r=new Blob([a.buffer],{type:c});else throw new Error("Không thể chuyển buffer thành Blob");break}default:throw new Error("Loại dữ liệu không hợp lệ")}h(r,u),s.value="success"}catch(k){s.value="error",o.value=k.message||"Lỗi không xác định"}},h=(a,p)=>{const l=document.createElement("a"),d=URL.createObjectURL(a);l.href=d,l.download=p,l.click(),URL.revokeObjectURL(d)};return{status:s,error:o,downloadFile:n,detectType:C,guessMimeType:x}}const S={class:"status"},j={key:0,class:"error"},V=_({__name:"demo",setup(s){const{status:o,error:e,downloadFile:n}=P(),h=g("data:text/plain;base64,SGVsbG8sIHdvcmxkIQ=="),a=new Blob(["Blob content example!"],{type:"text/plain"}),p=new TextEncoder().encode("Binary text!"),l=g(""),d=()=>{l.value="url",n("https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf","example.pdf")},k=()=>{l.value="base64",n(h.value,"hello.txt")},u=()=>{l.value="blob",n(a,"blob-example.txt")},c=()=>{l.value="buffer",n(p,"binary.txt")};return(r,t)=>(B(),w(U,null,[i("div",{class:"actions"},[i("button",{onClick:d},"Download from URL"),i("button",{onClick:k},"Download from Base64"),i("button",{onClick:u},"Download from Blob"),i("button",{onClick:c},"Download from Buffer")]),i("div",S,[i("p",null,[t[0]||(t[0]=i("b",null,"Status:",-1)),y(" "+b(F(o)),1)]),i("p",null,[t[1]||(t[1]=i("b",null,"Source:",-1)),y(" "+b(l.value),1)]),F(e)?(B(),w("p",j,"❌ Error: "+b(F(e)),1)):T("",!0)])],64))}}),q=R(V,[["__scopeId","data-v-b929e3f6"]]),O=JSON.parse('{"title":"useDownloadFile","description":"","frontmatter":{"category":"Browser"},"headers":[],"relativePath":"shared-file/useDownloadFile/index.md","filePath":"share/file/useDownloadFile/index.md","lastUpdated":1745326309000}'),N={name:"shared-file/useDownloadFile/index.md"},G=Object.assign(N,{setup(s){return(o,e)=>{const n=A("FunctionInfo"),h=A("DemoContainer");return B(),w("div",null,[e[0]||(e[0]=i("h1",{id:"usedownloadfile",tabindex:"-1"},[y("useDownloadFile "),i("a",{class:"header-anchor",href:"#usedownloadfile","aria-label":'Permalink to "useDownloadFile"'},"​")],-1)),m(n,{frontmatter:o.$frontmatter,package:"Share - File",fn:"useDownloadFile"},null,8,["frontmatter"]),e[1]||(e[1]=i("p",null,"Easily download files from a URL, Blob, Base64, or Buffer (ArrayBuffer/Uint8Array). Provides download status tracking and error handling.",-1)),e[2]||(e[2]=i("h2",{id:"demo",tabindex:"-1"},[y("Demo "),i("a",{class:"header-anchor",href:"#demo","aria-label":'Permalink to "Demo"'},"​")],-1)),m(h,null,{default:L(()=>[m(q)]),_:1}),e[3]||(e[3]=I("",8))])}}});export{O as __pageData,G as default};
