import{d as E,p as b,c as h,o as c,F as k,j as l,e as _,ai as x,k as d,a as f,t as g,B as v,an as C,C as F,G as m,ah as R,w}from"./chunks/framework.ArdWB6UD.js";import{u as D}from"./chunks/index.BH50wITg.js";import"./chunks/index.qVbhMwFm.js";import"./chunks/is.CvtvcIRX.js";import"./chunks/configurable.BnIb_oSx.js";function P(p={}){const e=new A;async function s(a,i={}){return e.read(a,Object.assign({},p,i))}return{read:s}}class A{async read(e,s={}){const a=s.parser||this.getParser(e),i=s.type||"text",o=s.onSuccess,r=s.onError;try{let t=await y.read(e,i);return a&&(t=await a.parse(t,e)),o&&o(t),t}catch(t){throw r&&r(t),t}}getParser(e){switch(y.getExtension(e)){case"geojson":case"json":return new S}}}class y{static getExtension(e){return e.name.split(".").pop()}static async read(e,s){return new Promise((a,i)=>{const o=new window.FileReader;o.onload=r=>r.target&&a(r.target.result),o.onerror=r=>i(r),s==="text"?o.readAsText(e):s==="arraybuffer"?o.readAsArrayBuffer(e):s==="binary"?o.readAsDataURL(e):i(new Error(`Read file as ${s} is not available`))})}}class S{parse(e,s){const a=JSON.parse(e);return Promise.resolve(this.toGeojson(a))}toGeojson(e){return e.crs,e}}const B=["disabled"],N=E({__name:"demo",setup(p){const{files:e,open:s,reset:a,onChange:i}=D(),{read:o}=P(),r=b("");return i(t=>{t&&t[0]&&o(t[0]).then(n=>{console.info(n),typeof n=="string"&&(r.value=n)})}),(t,n)=>(c(),h(k,null,[l("button",{type:"button",onClick:n[0]||(n[0]=u=>d(s)())},"Choose files"),l("button",{type:"button",disabled:!d(e),onClick:n[1]||(n[1]=u=>d(a)())},"Reset",8,B),d(e)?(c(),h(k,{key:0},[l("p",null,[n[3]||(n[3]=f(" You have selected: ")),l("b",null,g(`${d(e).length} ${d(e).length===1?"file":"files"}`),1)]),(c(!0),h(k,null,v(d(e),u=>(c(),h("li",{key:u.name},g(u.name),1))),128))],64)):_("",!0),x(l("textarea",{readonly:"","onUpdate:modelValue":n[2]||(n[2]=u=>r.value=u)}," ",512),[[C,r.value]])],64))}}),G=JSON.parse('{"title":"useFileReader","description":"","frontmatter":{"category":"Browser"},"headers":[],"relativePath":"shared-file/useFileReader/index.md","filePath":"share/file/useFileReader/index.md","lastUpdated":1745326309000}'),T={name:"shared-file/useFileReader/index.md"},I=Object.assign(T,{setup(p){return(e,s)=>{const a=F("FunctionInfo"),i=F("DemoContainer");return c(),h("div",null,[s[0]||(s[0]=l("h1",{id:"usefilereader",tabindex:"-1"},[f("useFileReader "),l("a",{class:"header-anchor",href:"#usefilereader","aria-label":'Permalink to "useFileReader"'},"​")],-1)),m(a,{frontmatter:e.$frontmatter,package:"Share - File",fn:"useFileReader"},null,8,["frontmatter"]),s[1]||(s[1]=l("p",null,"Open file dialog with ease.",-1)),s[2]||(s[2]=l("h2",{id:"demo",tabindex:"-1"},[f("Demo "),l("a",{class:"header-anchor",href:"#demo","aria-label":'Permalink to "Demo"'},"​")],-1)),m(i,null,{default:w(()=>[m(N)]),_:1}),s[3]||(s[3]=R("",2))])}}});export{G as __pageData,I as default};
