import{d as y,s as F,o as p,c as u,j as l,k as d,F as k,a as g,t as f,E as b,e as x,a6 as v,aa as C,D as _,I as m,w as R,a5 as w}from"./chunks/framework.CTGY6mxV.js";import{u as D}from"./chunks/index.CR3Uo0z_.js";import"./chunks/index.8yTjE-xb.js";import"./chunks/configurable.DoS0fK6c.js";import"./chunks/is.DGW30r2M.js";function P(c={}){const e=new A;async function s(a,r={}){return e.read(a,Object.assign({},c,r))}return{read:s}}class A{async read(e,s={}){const a=s.parser||this.getParser(e),r=s.type||"text",i=s.onSuccess,n=s.onError;try{let t=await E.read(e,r);return a&&(t=await a.parse(t,e)),i&&i(t),t}catch(t){throw n&&n(t),t}}getParser(e){switch(E.getExtension(e)){case"geojson":case"json":return new S}}}class E{static getExtension(e){return e.name.split(".").pop()}static async read(e,s){return new Promise((a,r)=>{const i=new window.FileReader;i.onload=n=>n.target&&a(n.target.result),i.onerror=n=>r(n),s==="text"?i.readAsText(e):s==="arraybuffer"?i.readAsArrayBuffer(e):s==="binary"?i.readAsDataURL(e):r(new Error(`Read file as ${s} is not available`))})}}class S{parse(e,s){const a=JSON.parse(e);return Promise.resolve(this.toGeojson(a))}toGeojson(e){return e.crs,e}}const N=["disabled"],T=y({__name:"demo",setup(c){const{files:e,open:s,reset:a,onChange:r}=D(),{read:i}=P(),n=F("");return r(t=>{t&&t[0]&&i(t[0]).then(o=>{console.log(o),typeof o=="string"&&(n.value=o)})}),(t,o)=>(p(),u(k,null,[l("button",{type:"button",onClick:o[0]||(o[0]=h=>d(s)())},"Choose files"),l("button",{type:"button",disabled:!d(e),onClick:o[1]||(o[1]=h=>d(a)())},"Reset",8,N),d(e)?(p(),u(k,{key:0},[l("p",null,[g(" You have selected: "),l("b",null,f(`${d(e).length} ${d(e).length===1?"file":"files"}`),1)]),(p(!0),u(k,null,b(d(e),h=>(p(),u("li",{key:h.name},f(h.name),1))),128))],64)):x("",!0),v(l("textarea",{readonly:"","onUpdate:modelValue":o[2]||(o[2]=h=>n.value=h)}," ",512),[[C,n.value]])],64))}}),B=l("h1",{id:"usefilereader",tabindex:"-1"},[g("useFileReader "),l("a",{class:"header-anchor",href:"#usefilereader","aria-label":'Permalink to "useFileReader"'},"​")],-1),V=l("p",null,"Open file dialog with ease.",-1),$=l("h2",{id:"demo",tabindex:"-1"},[g("Demo "),l("a",{class:"header-anchor",href:"#demo","aria-label":'Permalink to "Demo"'},"​")],-1),O=w("",2),L=JSON.parse('{"title":"useFileReader","description":"","frontmatter":{"category":"Browser"},"headers":[],"relativePath":"shared-file/useFileReader/index.md","filePath":"libs/shared-file/src/useFileReader/index.md","lastUpdated":1718540219000}'),j={name:"shared-file/useFileReader/index.md"},H=Object.assign(j,{setup(c){return(e,s)=>{const a=_("FunctionInfo"),r=_("DemoContainer");return p(),u("div",null,[B,m(a,{frontmatter:e.$frontmatter,package:"Share - Core",fn:"useFileReader"},null,8,["frontmatter"]),V,$,m(r,null,{default:R(()=>[m(T)]),_:1}),O])}}});export{L as __pageData,H as default};
