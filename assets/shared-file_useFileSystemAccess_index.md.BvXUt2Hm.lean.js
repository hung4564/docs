import{s as m,h as y,v as P,d as I,ac as N,o as k,c as u,j as a,k as n,a6 as C,ad as V,t as S,a as v,aa as $,ab as U,e as z,D as b,I as _,w as O,a5 as L}from"./chunks/framework.BN-DpKB1.js";import{s as W}from"./chunks/index.DoGtz-6N.js";import{d as q}from"./chunks/configurable.DoS0fK6c.js";import{t as g}from"./chunks/index.DFrNueJU.js";import{u as j}from"./chunks/index.CDblAx5j.js";import"./chunks/is.DGW30r2M.js";function R(c={}){const{window:h=q,dataType:i="Text"}=c,t=h,r=j(()=>t&&"showSaveFilePicker"in t&&"showOpenFilePicker"in t),d=m(),l=m(),s=m(),p=y(()=>{var e;return((e=s.value)==null?void 0:e.name)??""}),A=y(()=>{var e;return((e=s.value)==null?void 0:e.type)??""}),x=y(()=>{var e;return((e=s.value)==null?void 0:e.size)??0}),B=y(()=>{var e;return((e=s.value)==null?void 0:e.lastModified)??0});async function D(e={}){if(!r.value)return;const[o]=await t.showOpenFilePicker({...g(c),...e});d.value=o,await f()}async function T(e={}){r.value&&(d.value=await t.showSaveFilePicker({...c,...e}),l.value=void 0,await f())}async function M(e={}){if(r.value){if(!d.value)return F(e);if(l.value){const o=await d.value.createWritable();await o.write(l.value),await o.close()}await E()}}async function F(e={}){if(r.value){if(d.value=await t.showSaveFilePicker({...c,...e}),l.value){const o=await d.value.createWritable();await o.write(l.value),await o.close()}await E()}}async function E(){var e;s.value=await((e=d.value)==null?void 0:e.getFile())}async function f(){var o,w;await E();const e=g(i);e==="Text"?l.value=await((o=s.value)==null?void 0:o.text()):e==="ArrayBuffer"?l.value=await((w=s.value)==null?void 0:w.arrayBuffer()):e==="Blob"&&(l.value=s.value)}return P(()=>g(i),f),{isSupported:r,data:l,file:s,fileName:p,fileMIME:A,fileSize:x,fileLastModified:B,open:D,create:T,save:M,saveAs:F,updateData:f}}const H={flex:"~ gap-1","items-center":""},J=["disabled"],G=["disabled"],K={ml5:""},Q=a("div",{"text-xs":"",op50:""},"DataType",-1),X=a("option",{value:"Text"},"Text",-1),Y=a("option",{value:"ArrayBuffer"},"ArrayBuffer",-1),Z=a("option",{value:"Blob"},"Blob",-1),ee=[X,Y,Z],se={class:"code-block",lang:"yaml"},ae={key:0},ie={key:1},te=I({__name:"demo",setup(c){const h=m("Text"),i=R({dataType:h,types:[{description:"text",accept:{"text/plain":[".txt",".html"]}}],excludeAcceptAllOption:!0}),t=i.data,r=W(N({isSupported:i.isSupported,file:i.file,fileName:i.fileName,fileMIME:i.fileMIME,fileSize:i.fileSize,fileLastModified:i.fileLastModified}));async function d(){await i.save()}return(l,s)=>(k(),u("div",null,[a("div",H,[a("button",{onClick:s[0]||(s[0]=p=>n(i).open())},"Open"),a("button",{onClick:s[1]||(s[1]=p=>n(i).updateData())},"Update"),a("button",{onClick:s[2]||(s[2]=p=>n(i).create())},"New file"),a("button",{disabled:!n(i).file.value,onClick:d},"Save",8,J),a("button",{disabled:!n(i).file.value,onClick:s[3]||(s[3]=p=>n(i).saveAs())},"Save as",8,G),a("div",K,[Q,C(a("select",{"onUpdate:modelValue":s[4]||(s[4]=p=>h.value=p),class:"outline-none w-30 px2 py1 text-sm",border:"~ main rounded"},ee,512),[[V,h.value]])])]),a("pre",se,S(n(r)),1),n(t)?(k(),u("div",ae,[v(" Content "),typeof n(t)=="string"?C((k(),u("textarea",{key:0,"onUpdate:modelValue":s[5]||(s[5]=p=>U(t)?t.value=p:null),rows:"20",cols:"40","w-full":""},null,512)),[[$,n(t)]]):(k(),u("span",ie,S(n(t)),1))])):z("",!0)]))}}),ne=a("h1",{id:"usefilesystemaccess",tabindex:"-1"},[v("useFileSystemAccess "),a("a",{class:"header-anchor",href:"#usefilesystemaccess","aria-label":'Permalink to "useFileSystemAccess"'},"​")],-1),le=a("p",null,[v("Create and read and write local files with "),a("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API",target:"_blank",rel:"noreferrer"},"FileSystemAccessAPI")],-1),oe=a("h2",{id:"demo",tabindex:"-1"},[v("Demo "),a("a",{class:"header-anchor",href:"#demo","aria-label":'Permalink to "Demo"'},"​")],-1),re=L("",2),ye=JSON.parse('{"title":"useFileSystemAccess","description":"","frontmatter":{"category":"Browser"},"headers":[],"relativePath":"shared-file/useFileSystemAccess/index.md","filePath":"libs/shared-file/src/useFileSystemAccess/index.md","lastUpdated":1718546463000}'),de={name:"shared-file/useFileSystemAccess/index.md"},me=Object.assign(de,{setup(c){return(h,i)=>{const t=b("FunctionInfo"),r=b("DemoContainer");return k(),u("div",null,[ne,_(t,{frontmatter:h.$frontmatter,package:"Share - Core",fn:"useFileSystemAccess"},null,8,["frontmatter"]),le,oe,_(r,null,{default:O(()=>[_(te)]),_:1}),re])}}});export{ye as __pageData,me as default};
