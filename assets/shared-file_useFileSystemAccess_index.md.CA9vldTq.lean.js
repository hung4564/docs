import{p as y,v as P,al as I,h as k,q as N,d as V,ap as U,c,o as f,j as a,e as z,k as o,ai as S,aq as O,t as b,a as m,an as $,ao as q,C as A,G as g,ah as L,w as W}from"./chunks/framework.ArdWB6UD.js";import{s as j}from"./chunks/index.D_dGY9jv.js";import"./chunks/is.CvtvcIRX.js";import{t as F}from"./chunks/index._UC6Waud.js";import{d as R}from"./chunks/configurable.BnIb_oSx.js";function G(){const l=y(!1),n=I();return n&&P(()=>{l.value=!0},n),l}function H(l){const n=G();return k(()=>(n.value,!!l()))}function J(l={}){const{window:n=R,dataType:s="Text"}=l,t=n,p=H(()=>t&&"showSaveFilePicker"in t&&"showOpenFilePicker"in t),u=y(),r=y(),e=y(),h=k(()=>{var i;return((i=e.value)==null?void 0:i.name)??""}),_=k(()=>{var i;return((i=e.value)==null?void 0:i.type)??""}),x=k(()=>{var i;return((i=e.value)==null?void 0:i.size)??0}),B=k(()=>{var i;return((i=e.value)==null?void 0:i.lastModified)??0});async function M(i={}){if(!p.value)return;const[d]=await t.showOpenFilePicker({...F(l),...i});u.value=d,await v()}async function D(i={}){p.value&&(u.value=await t.showSaveFilePicker({...l,...i}),r.value=void 0,await v())}async function T(i={}){if(p.value){if(!u.value)return w(i);if(r.value){const d=await u.value.createWritable();await d.write(r.value),await d.close()}await E()}}async function w(i={}){if(p.value){if(u.value=await t.showSaveFilePicker({...l,...i}),r.value){const d=await u.value.createWritable();await d.write(r.value),await d.close()}await E()}}async function E(){var i;e.value=await((i=u.value)==null?void 0:i.getFile())}async function v(){var d,C;await E();const i=F(s);i==="Text"?r.value=await((d=e.value)==null?void 0:d.text()):i==="ArrayBuffer"?r.value=await((C=e.value)==null?void 0:C.arrayBuffer()):i==="Blob"&&(r.value=e.value)}return N(()=>F(s),v),{isSupported:p,data:r,file:e,fileName:h,fileMIME:_,fileSize:x,fileLastModified:B,open:M,create:D,save:T,saveAs:w,updateData:v}}const K={flex:"~ gap-1","items-center":""},Q=["disabled"],X=["disabled"],Y={ml5:""},Z={class:"code-block",lang:"yaml"},ee={key:0},se={key:1},ie=V({__name:"demo",setup(l){const n=y("Text"),s=J({dataType:n,types:[{description:"text",accept:{"text/plain":[".txt",".html"]}}],excludeAcceptAllOption:!0}),t=s.data,p=j(U({isSupported:s.isSupported,file:s.file,fileName:s.fileName,fileMIME:s.fileMIME,fileSize:s.fileSize,fileLastModified:s.fileLastModified}));async function u(){await s.save()}return(r,e)=>(f(),c("div",null,[a("div",K,[a("button",{onClick:e[0]||(e[0]=h=>o(s).open())},"Open"),a("button",{onClick:e[1]||(e[1]=h=>o(s).updateData())},"Update"),a("button",{onClick:e[2]||(e[2]=h=>o(s).create())},"New file"),a("button",{disabled:!o(s).file.value,onClick:u},"Save",8,Q),a("button",{disabled:!o(s).file.value,onClick:e[3]||(e[3]=h=>o(s).saveAs())},"Save as",8,X),a("div",Y,[e[7]||(e[7]=a("div",{"text-xs":"",op50:""},"DataType",-1)),S(a("select",{"onUpdate:modelValue":e[4]||(e[4]=h=>n.value=h),class:"outline-none w-30 px2 py1 text-sm",border:"~ main rounded"},e[6]||(e[6]=[a("option",{value:"Text"},"Text",-1),a("option",{value:"ArrayBuffer"},"ArrayBuffer",-1),a("option",{value:"Blob"},"Blob",-1)]),512),[[O,n.value]])])]),a("pre",Z,b(o(p)),1),o(t)?(f(),c("div",ee,[e[8]||(e[8]=m(" Content ")),typeof o(t)=="string"?S((f(),c("textarea",{key:0,"onUpdate:modelValue":e[5]||(e[5]=h=>q(t)?t.value=h:null),rows:"20",cols:"40","w-full":""},null,512)),[[$,o(t)]]):(f(),c("span",se,b(o(t)),1))])):z("",!0)]))}}),de=JSON.parse('{"title":"useFileSystemAccess","description":"","frontmatter":{"category":"Browser"},"headers":[],"relativePath":"shared-file/useFileSystemAccess/index.md","filePath":"share/file/useFileSystemAccess/index.md","lastUpdated":1745326309000}'),ae={name:"shared-file/useFileSystemAccess/index.md"},pe=Object.assign(ae,{setup(l){return(n,s)=>{const t=A("FunctionInfo"),p=A("DemoContainer");return f(),c("div",null,[s[0]||(s[0]=a("h1",{id:"usefilesystemaccess",tabindex:"-1"},[m("useFileSystemAccess "),a("a",{class:"header-anchor",href:"#usefilesystemaccess","aria-label":'Permalink to "useFileSystemAccess"'},"​")],-1)),g(t,{frontmatter:n.$frontmatter,package:"Share - File",fn:"useFileSystemAccess"},null,8,["frontmatter"]),s[1]||(s[1]=a("p",null,[m("Create and read and write local files with "),a("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API",target:"_blank",rel:"noreferrer"},"FileSystemAccessAPI")],-1)),s[2]||(s[2]=a("h2",{id:"demo",tabindex:"-1"},[m("Demo "),a("a",{class:"header-anchor",href:"#demo","aria-label":'Permalink to "Demo"'},"​")],-1)),g(p,null,{default:W(()=>[g(ie)]),_:1}),s[3]||(s[3]=L("",2))])}}});export{de as __pageData,pe as default};
