import{t as g}from"./index.qVbhMwFm.js";import{c as y,n as o}from"./is.CvtvcIRX.js";import{t as A}from"./index._UC6Waud.js";import{u as s}from"./index.0Jj092t_.js";import{d as I}from"./configurable.DRaGijES.js";import{u as S}from"./index.C8TLjytL.js";import{h as x,p as E,q as W}from"./framework.ArdWB6UD.js";function k(m,l,f={}){const{root:v,rootMargin:d="0px",threshold:h=.1,window:n=I,immediate:a=!0}=f,u=S(()=>n&&"IntersectionObserver"in n),b=x(()=>{const t=A(m);return(Array.isArray(t)?t:[t]).map(s).filter(y)});let r=o;const e=E(a),w=u.value?W(()=>[b.value,s(v),e.value],([t,O])=>{if(r(),!e.value||!t.length)return;const p=new IntersectionObserver(l,{root:s(O),rootMargin:d,threshold:h});t.forEach(c=>c&&p.observe(c)),r=()=>{p.disconnect(),r=o}},{immediate:a,flush:"post"}):o,i=()=>{r(),w(),e.value=!1};return g(i),{isSupported:u,isActive:e,pause(){r(),e.value=!1},resume(){e.value=!0},stop:i}}export{k as u};
