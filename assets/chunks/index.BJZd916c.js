import{t as g}from"./index.CHp6lZsi.js";import{d as y}from"./configurable.DoS0fK6c.js";import{t as A}from"./index.DFrNueJU.js";import{n as o,c as I}from"./is.DGW30r2M.js";import{u as s}from"./index.Bge_AMkj.js";import{u as S}from"./index.CDblAx5j.js";import{h as x,s as E,v as W}from"./framework.BN-DpKB1.js";function q(m,l,f={}){const{root:v,rootMargin:d="0px",threshold:h=.1,window:n=y,immediate:a=!0}=f,u=S(()=>n&&"IntersectionObserver"in n),b=x(()=>{const t=A(m);return(Array.isArray(t)?t:[t]).map(s).filter(I)});let r=o;const e=E(a),w=u.value?W(()=>[b.value,s(v),e.value],([t,O])=>{if(r(),!e.value||!t.length)return;const p=new IntersectionObserver(l,{root:s(O),rootMargin:d,threshold:h});t.forEach(c=>c&&p.observe(c)),r=()=>{p.disconnect(),r=o}},{immediate:a,flush:"post"}):o,i=()=>{r(),w(),e.value=!1};return g(i),{isSupported:u,isActive:e,pause(){r(),e.value=!1},resume(){e.value=!0},stop:i}}export{q as u};
