import{n as C,t as v}from"./chunks/is.CvtvcIRX.js";import{t as I}from"./chunks/index._UC6Waud.js";import{ao as x,p as D,d as T,h as P,C as c,c as B,o as _,F as V,G as g,j as k,w as b,a as E,k as j,t as S,ah as N}from"./chunks/framework.ArdWB6UD.js";import{d as q}from"./chunks/configurable.DRaGijES.js";import{u as A}from"./chunks/index.COK6Xz62.js";import{u as O}from"./chunks/index.CxJD3wvG.js";import"./chunks/index.qVbhMwFm.js";import"./chunks/index.0Jj092t_.js";import"./chunks/index.DNsJFRBg.js";function M(n,i){function s(...a){return new Promise((t,l)=>{Promise.resolve(n(()=>i.apply(this,a),{fn:i,thisArg:this,args:a})).then(t).catch(l)})}return s}function R(...n){let i=0,s,a=!0,t=C,l,e,h,p,r;!x(n[0])&&typeof n[0]=="object"?{delay:e,trailing:h=!0,leading:p=!0,rejectOnCancel:r=!1}=n[0]:[e,h=!0,p=!0,r=!1]=n;const o=()=>{s&&(clearTimeout(s),s=void 0,t(),t=C)};return u=>{const d=I(e),m=Date.now()-i,F=()=>l=u();return o(),d<=0?(i=Date.now(),F()):(m>d&&(p||!a)?(i=Date.now(),F()):h&&(l=new Promise((f,w)=>{t=r?w:f,s=setTimeout(()=>{i=Date.now(),a=!0,f(F()),o()},Math.max(0,d-m))})),!p&&!s&&(s=setTimeout(()=>a=!0,d)),a=!1,l)}}const U=["mousemove","mousedown","resize","keydown","touchstart","wheel"],$=6e4;function L(n=$,i={}){const{initialState:s=!1,listenForVisibilityChange:a=!0,events:t=U,window:l=q,eventFilter:e=R(50)}=i,h=D(s),p=D(v());let r;const o=()=>{h.value=!1,clearTimeout(r),r=setTimeout(()=>h.value=!0,n)},y=M(e,()=>{p.value=v(),o()});if(l){const u=l.document;for(const d of t)A(l,d,y,{passive:!0});a&&A(u,"visibilitychange",()=>{u.hidden||y()}),o()}return{idle:h,lastActive:p,reset:o}}const W={class:"mb-2"},z={class:"text-primary"},G=T({__name:"demo",setup(n){const{idle:i,lastActive:s}=L(5e3),a=O({interval:1e3}),t=P(()=>Math.floor((a.value-s.value)/1e3));return(l,e)=>{const h=c("note"),p=c("BooleanDisplay");return _(),B(V,null,[g(h,{class:"mb-2"},{default:b(()=>e[0]||(e[0]=[E(" For demonstration purpose, the idle timeout is set to "),k("b",null,"5s",-1),E(" in this demo (default 1min). ")])),_:1}),k("div",W,[e[1]||(e[1]=E("Idle: ")),g(p,{value:j(i)},null,8,["value"])]),k("div",null,[e[2]||(e[2]=E(" Inactive: ")),k("b",z,S(t.value)+"s",1)])],64)}}}),es=JSON.parse('{"title":"useIdle","description":"","frontmatter":{"category":"Sensors"},"headers":[],"relativePath":"shared-core/useIdle/index.md","filePath":"share/core/useIdle/index.md","lastUpdated":1720970429000}'),J={name:"shared-core/useIdle/index.md"},ts=Object.assign(J,{setup(n){return(i,s)=>{const a=c("FunctionInfo"),t=c("DemoContainer");return _(),B("div",null,[s[0]||(s[0]=k("h1",{id:"useidle",tabindex:"-1"},[E("useIdle "),k("a",{class:"header-anchor",href:"#useidle","aria-label":'Permalink to "useIdle"'},"â€‹")],-1)),g(a,{frontmatter:i.$frontmatter,package:"Share - Core",fn:"useIntersectionObserver"},null,8,["frontmatter"]),s[1]||(s[1]=k("p",null,"Tracks whether the user is being inactive.",-1)),s[2]||(s[2]=k("h2",{id:"demo",tabindex:"-1"},[E("Demo "),k("a",{class:"header-anchor",href:"#demo","aria-label":'Permalink to "Demo"'},"â€‹")],-1)),g(t,null,{default:b(()=>[g(G)]),_:1}),s[3]||(s[3]=N("",4))])}}});export{es as __pageData,ts as default};
